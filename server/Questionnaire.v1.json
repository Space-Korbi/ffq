{
  "openapi": "3.0.0",
  "info": {
    "title": "Questionnaire",
    "version": "1.0",
    "description": "Questionnaires will be presented to the participants. Use Questionnaires API calls to edit questionnaires."
  },
  "servers": [
    {
      "url": "http://localhost:3000/api"
    }
  ],
  "paths": {
    "/questionnaires": {
      "get": {
        "summary": "GET",
        "tags": [],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "description": "",
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "uniqueItems": true,
                      "minItems": 1,
                      "items": {
                        "required": [
                          "name",
                          "startDate",
                          "endDate",
                          "_id",
                          "createdAt",
                          "updatedAt",
                          "__v"
                        ],
                        "properties": {
                          "name": {
                            "type": "string",
                            "minLength": 1
                          },
                          "startDate": {
                            "type": "string",
                            "minLength": 1
                          },
                          "endDate": {
                            "type": "string",
                            "minLength": 1
                          },
                          "questions": {
                            "type": "array",
                            "items": {
                              "required": [],
                              "properties": {}
                            }
                          },
                          "_id": {
                            "type": "string",
                            "minLength": 1
                          },
                          "createdAt": {
                            "type": "string",
                            "minLength": 1
                          },
                          "updatedAt": {
                            "type": "string",
                            "minLength": 1
                          },
                          "__v": {
                            "type": "number"
                          }
                        }
                      }
                    }
                  },
                  "required": ["data"]
                },
                "examples": {
                  "example-1": {
                    "value": {
                      "message": "Questionnaires",
                      "details": "All questionnaires",
                      "data": [
                        {
                          "name": "Questionnaire 1",
                          "startDate": "2020-01-31T23:00:00.000Z",
                          "endDate": "2020-02-28T23:00:00.000Z",
                          "questions": ["gy6dzUARhiEELWtnXBsKr", "-MyJbUqUvAA_esdbm5dM-"],
                          "_id": "LU-nLnyTZBLo-0G0Jfcx4",
                          "createdAt": "2021-01-08T13:02:32.461Z",
                          "updatedAt": "2021-01-08T13:03:10.065Z",
                          "__v": 2
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "description": "",
                  "type": "object",
                  "properties": {
                    "err": {
                      "type": "object",
                      "required": ["name", "message"],
                      "properties": {
                        "name": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "minLength": 1
                    },
                    "detail": {
                      "type": "string",
                      "minLength": 1
                    }
                  },
                  "required": ["message", "detail"]
                },
                "examples": {
                  "example-1": {
                    "value": {
                      "err": {
                        "name": "JsonWebTokenError",
                        "message": "jwt malformed"
                      },
                      "message": "Token could not be verified",
                      "detail": "Ensure that the access token is valid"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "description": "",
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "minLength": 1
                    },
                    "detail": {
                      "type": "string",
                      "minLength": 1
                    }
                  },
                  "required": ["message", "detail"]
                },
                "examples": {
                  "example-1": {
                    "value": {
                      "message": "No token provided!",
                      "detail": "Ensure that a valid access token is included in the request header"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "description": "",
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "minLength": 1
                    },
                    "details": {
                      "type": "string",
                      "minLength": 1
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "required": [],
                        "properties": {}
                      }
                    }
                  },
                  "required": ["message", "details", "data"]
                },
                "examples": {
                  "example-1": {
                    "value": {
                      "message": "No Questionnaires",
                      "details": "No questionnaires have been created yet",
                      "data": []
                    }
                  }
                }
              }
            }
          }
        },
        "operationId": "get-questionnaires",
        "description": "Get all questionnaires",
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "header",
            "name": "x-access-token",
            "description": "JWT",
            "required": true
          }
        ]
      }
    },
    "/questionnaires/{:id}": {
      "parameters": [
        {
          "schema": {
            "type": "string"
          },
          "name": ":id",
          "in": "path",
          "description": "Questionnaire ID",
          "required": true
        }
      ],
      "get": {
        "summary": "",
        "operationId": "get-questionnaires-:id",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Questionnaire": {
        "title": "Questionnaire",
        "type": "object",
        "description": "",
        "properties": {
          "id": {
            "type": "string",
            "default": "nanoid.nanoid()",
            "format": "uuid"
          },
          "name": {
            "type": "string",
            "default": "Neuer Fragebogen"
          },
          "startDate": {
            "type": "string",
            "format": "date",
            "default": "Date.UTC(2022, 1, 1, 0, 0, 0, 0)"
          },
          "endDate": {
            "type": "string",
            "format": "date",
            "default": "Date.UTC(2023, 1, 1, 0, 0, 0, 0)"
          },
          "questions": {
            "type": ["string", "array"],
            "items": {
              "type": "string",
              "format": "uuid"
            }
          }
        },
        "required": ["id"]
      }
    }
  }
}
